# VSCode ROS2 Workspace for IoT applications

This is the **ROS2 Docker development environment**.

It is a fork from the [**VSCode ROS2 Workspace Template** (vscode_ros2_workspace)](https://github.com/athackst/vscode_ros2_workspace/tree/humble) project for the [iron](https://github.com/athackst/vscode_ros2_workspae/tree/iron) distro.


This project also incorporates [`colcon-poetry-ros`](https://github.com/UrbanMachine/colcon-poetry-ros)
into the Docker image for the packages dependency management, allowing the configuration of the packages with
a `pyproject.toml` file and installing them and their dependencies with [Poetry](https://python-poetry.org/).

---
**NOTE**

The `colcon-poetry-ros` plugin allows [colcon](https://colcon.readthedocs.io/en/released/) to build the nodes
but it does not seem to make them available to ROS2 out of the box, which
results in the `"ros2 run"` command not working to launch them (I assume the same would apply for any launch files,
even though I have not confirmed it). This is work in progress but, for now, please see the section [Running the nodes](README.md#running-the-nodes)
for more info on how to run the nodes (these are just Python scripts after all).

---

## Use
For general information about the use of the development container, please refer to the original README file from the
VSCode template project (`.README`).

Once the container is opened in VS Code, all the ros2 commands are available and the packages can be placed in the `src`
folder (which is the `src` folder of the workspace). Building the packages is possible from the
`ros2-development-workspace` folder (default workspace).

## Linting

```
ament_flake8 src/ --config src/ament_flake8.ini
```

## Running the nodes

All the nodes generated by colcon will be in: `install/<package_name>/lib/<package_name>/`. It is then
possible to launch them with:

```
python3 install/<package_name>/lib/<package_name>/<node_name>
```

Or even just like normal Python modules from the package folder in the `src` folder, for instance
(`your_package/your_package/node_module.py`):

```
poetry run python3 -m your_package.your_package.node_module
```
